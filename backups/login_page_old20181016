import 'package:flutter/material.dart';
import 'package:auto_size_text/auto_size_text.dart';

class LoginPage extends StatefulWidget {
  @override
  State<StatefulWidget> createState() => new _LoginPageState();
}

enum FormType { login, register }

class _LoginPageState extends State<LoginPage> {
  final formKey = new GlobalKey<FormState>();
  String _email;
  String _password;
  FormType _formType = FormType.login;

  void onPressedCallback() {
    //so that onPressed has something to call, otherwise formatting won't work. Temporary.
    print('Pressed');
  }

  @override
  Widget build(BuildContext context) {
    return new Scaffold(
      appBar: new AppBar(
        title: new Text('Gig-O-Matic',
            style: new TextStyle(color: Colors.black, fontSize: 30.0)),
        backgroundColor: Color.fromRGBO(150, 248, 157, 1.0),
      ),
      body: new Container(
          padding: EdgeInsets.all(16.0),
          color: Color.fromRGBO(150, 248, 157, 1.0),
          child: new Form(
            key: formKey,
            child: new Column(
              crossAxisAlignment: CrossAxisAlignment.stretch,
              children: buildInputs() + buildSubmitButtons() + buildFooter(),
            ),
          )),
    );
  }

  List<Widget> buildInputs() {
    return [
      const SizedBox(height: 20.0),
      new TextFormField(
        decoration: new InputDecoration(
            labelText: 'Email ',
            border: OutlineInputBorder(),
            filled: true,
            fillColor: Colors.white),
        validator: (value) => value.isEmpty ? 'Email can\'t be empty' : null,
        onSaved: (value) => _email = value,
        //scrollPadding: EdgeInsets.all(50.0),
      ),
      const SizedBox(height: 5.0),
      new TextFormField(
        decoration: new InputDecoration(
            labelText: 'Password',
            border: OutlineInputBorder(),
            filled: true,
            fillColor: Colors.white),
        obscureText: true,
        validator: (value) => value.isEmpty ? 'Password can\'t be empty' : null,
        onSaved: (value) => _password = value,
      ),
      const SizedBox(height: 5.0),
    ];
  }

  List<Widget> buildSubmitButtons() {
    //if (_formType == FormType.login){
    return [
      new RaisedButton(
        child: new Text('Login',
            style: new TextStyle(fontSize: 20.0, color: Colors.black)),
        color: Colors.blue,
        shape: new RoundedRectangleBorder(
            borderRadius: new BorderRadius.circular(15.0)),
        onPressed: onPressedCallback,
      ),
      new FlatButton(
        child: new Text('Create an Account',
            style: new TextStyle(fontSize: 20.0, color: Colors.black)),
        onPressed: onPressedCallback,
      ),
      new FlatButton(
        child: new Text('Forgot Password?',
            style: new TextStyle(fontSize: 20.0, color: Colors.black)),
        onPressed: onPressedCallback,
      ),
    ];
  }

  List<Widget> buildFooter() {
    return [
      new Expanded(
          child: new Align(
              alignment: Alignment.bottomCenter,
              child: new Container(
                  padding: EdgeInsets.all(20.0),
                  child: new Row(
                    mainAxisAlignment: MainAxisAlignment.center,
                    children: <Widget>[
                      Expanded(
                        child: new AutoSizeText(
                          "Issues or questions? Contact admins here:",
                          style: new TextStyle(fontSize: 20.0),
                          maxLines: 1,
                        ),
                      ),
                      new Icon(Icons.email),
                    ],
                  )))),
    ];
  }
}
